<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>HybridPollingSender</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HybridPollingSender";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a>
<div class="skip"><a href="#skip-navbar_top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingConnection.html" title="class in com.lotus.sametime.core.util.connection"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../com/lotus/sametime/core/util/connection/JSSEManager.html" title="class in com.lotus.sametime.core.util.connection"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/lotus/sametime/core/util/connection/HybridPollingSender.html" target="_top">Frames</a></li>
<li><a href="HybridPollingSender.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.lotus.sametime.core.util.connection</div>
<h2 title="Class HybridPollingSender" class="title">Class HybridPollingSender</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.lotus.sametime.core.util.connection.HybridPollingSender</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">HybridPollingSender</span>
extends java.lang.Object</pre>
<div class="block">The sender associated with the Hybrid Polling Connection</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/lotus/sametime/core/util/PriorityQueue.html" title="class in com.lotus.sametime.core.util">PriorityQueue</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#m_queue">m_queue</a></strong></code>
<div class="block">A queue for outgoing messages.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#m_stopped">m_stopped</a></strong></code>
<div class="block">A flag to indicate that the thread was stopped.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.Thread</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#m_thread">m_thread</a></strong></code>
<div class="block">The thread that runs this receiver.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#HybridPollingSender(java.lang.String, short, java.net.URL, boolean, boolean, java.lang.String, short, boolean, java.lang.String, java.lang.String, boolean)">HybridPollingSender</a></strong>(java.lang.String&nbsp;host,
                   short&nbsp;port,
                   java.net.URL&nbsp;hostUrl,
                   boolean&nbsp;useWNet,
                   boolean&nbsp;secure,
                   java.lang.String&nbsp;proxy,
                   short&nbsp;proxyPort,
                   boolean&nbsp;useSystemProxy,
                   java.lang.String&nbsp;proxyUsername,
                   java.lang.String&nbsp;proxyPass,
                   boolean&nbsp;popupAuthDialog)</code>
<div class="block">Construct a polling sender.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#buildCompoundMessage()">buildCompoundMessage</a></strong>()</code>
<div class="block">Builds a compound message from the existing messages in queue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#cleanup()">cleanup</a></strong>()</code>
<div class="block">Un-initialze this sender object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#createCiphers(byte[], int)">createCiphers</a></strong>(byte[]&nbsp;key,
             int&nbsp;requiredKeyLength)</code>
<div class="block">Create the RC2 ciphers for signing and encryption of the message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.net.URLConnection</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#createURLConnection()">createURLConnection</a></strong>()</code>
<div class="block">Create the URLConnection object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#flush()">flush</a></strong>()</code>
<div class="block">Dispatch all messages waiting on the queue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#getKeepAliveRate()">getKeepAliveRate</a></strong>()</code>
<div class="block">Get the keepalive time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#getPolledInputStream()">getPolledInputStream</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#initialize()">initialize</a></strong>()</code>
<div class="block">Initialze this sender object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#isStopped()">isStopped</a></strong>()</code>
<div class="block">Test if the receiver was stopped.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#queueMessage(byte[], byte)">queueMessage</a></strong>(byte[]&nbsp;msg,
            byte&nbsp;priority)</code>
<div class="block">Submit a new outgoing message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#readBytes(java.io.DataInputStream)">readBytes</a></strong>(java.io.DataInputStream&nbsp;stream)</code>
<div class="block">Read a byte array, prefixed by it's length, from the given input stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#readFully(java.io.InputStream, byte[])">readFully</a></strong>(java.io.InputStream&nbsp;stream,
         byte[]&nbsp;buffer)</code>
<div class="block">Our own implementation of ReadFully().</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#run()">run</a></strong>()</code>
<div class="block">The thread code here overrides the standard Sender run() behavior.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#safeGetInputStream(java.net.URLConnection)">safeGetInputStream</a></strong>(java.net.URLConnection&nbsp;urlConnection)</code>
<div class="block">Return the input stream from the given URL connection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#send(byte[])">send</a></strong>(byte[]&nbsp;msg)</code>
<div class="block">Sends a protocol message to the server on VC #1
 We fall here via the flush() method of the base class</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#sendKeepAlive()">sendKeepAlive</a></strong>()</code>
<div class="block">Send a keepalive message NOW.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#sendOnce(byte[], int)">sendOnce</a></strong>(byte[]&nbsp;msg,
        int&nbsp;beepType)</code>
<div class="block">Try to send a protocol message to the server, and handle the response.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#setKeepAliveParams(long, byte[])">setKeepAliveParams</a></strong>(long&nbsp;rate,
                  byte[]&nbsp;msg)</code>
<div class="block">Nobody should call this method for hybrid polling.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingSender.html#startSender()">startSender</a></strong>()</code>
<div class="block">Start the sending thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="m_stopped">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_stopped</h4>
<pre>protected&nbsp;boolean m_stopped</pre>
<div class="block">A flag to indicate that the thread was stopped.</div>
</li>
</ul>
<a name="m_queue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_queue</h4>
<pre>protected&nbsp;<a href="../../../../../../com/lotus/sametime/core/util/PriorityQueue.html" title="class in com.lotus.sametime.core.util">PriorityQueue</a> m_queue</pre>
<div class="block">A queue for outgoing messages. Use PriorityLevel.MIN_PRIORITY_LEVEL as
 the size for the priority queue (min level is max value).</div>
</li>
</ul>
<a name="m_thread">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>m_thread</h4>
<pre>protected&nbsp;java.lang.Thread m_thread</pre>
<div class="block">The thread that runs this receiver.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HybridPollingSender(java.lang.String, short, java.net.URL, boolean, boolean, java.lang.String, short, boolean, java.lang.String, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HybridPollingSender</h4>
<pre>protected&nbsp;HybridPollingSender(java.lang.String&nbsp;host,
                   short&nbsp;port,
                   java.net.URL&nbsp;hostUrl,
                   boolean&nbsp;useWNet,
                   boolean&nbsp;secure,
                   java.lang.String&nbsp;proxy,
                   short&nbsp;proxyPort,
                   boolean&nbsp;useSystemProxy,
                   java.lang.String&nbsp;proxyUsername,
                   java.lang.String&nbsp;proxyPass,
                   boolean&nbsp;popupAuthDialog)</pre>
<div class="block">Construct a polling sender.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>host</code> - The host to connect to.</dd><dd><code>port</code> - The port to connect to.</dd><dd><code>hostURL</code> - The prefix to use for server URLs - replaces host and port.</dd><dd><code>useWNet</code> - A flag to indicate that we want to use WinInet to
                  connect to the server. (Ignored on non-windows machines)</dd><dd><code>secure</code> - A flag to indicate that we want to use HTTPS as the
                  connection protocol. (irrelevant if hostURL != null).</dd><dd><code>proxy</code> - An HTTP proxy to connect through.</dd><dd><code>proxyPort</code> - The proxy port.</dd><dd><code>useSystemProxy</code> - If true, ignore the proxy arg, and use the system settings.</dd><dd><code>proxyUsername</code> - The username to use for proxy authentication</dd><dd><code>proxyPass</code> - The password to use for proxy authentication</dd><dd><code>popupAuthDialog</code> - If true, ignore authentication parameters, and
                   popup the authentication dialog instead.
                   connection method. (ignored if hostURL != NULL)</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setKeepAliveParams(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKeepAliveParams</h4>
<pre>public&nbsp;void&nbsp;setKeepAliveParams(long&nbsp;rate,
                      byte[]&nbsp;msg)</pre>
<div class="block">Nobody should call this method for hybrid polling.
 Overide the base class method, just to make sure that in case of 
 calling this method a no op is performed</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>rate</code> - The keepAlive rate, in miliseconds. 0 means no keepAlive.</dd><dd><code>message</code> - What message to send as a keepalive message.</dd></dl>
</li>
</ul>
<a name="getPolledInputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPolledInputStream</h4>
<pre>protected&nbsp;java.io.InputStream&nbsp;getPolledInputStream()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>An input stream that can be used to read the bytes polled from
 the connection.</dd></dl>
</li>
</ul>
<a name="initialize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>protected&nbsp;void&nbsp;initialize()</pre>
<div class="block">Initialze this sender object. This is called once, before starting
 the thread.</div>
</li>
</ul>
<a name="cleanup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanup</h4>
<pre>protected&nbsp;void&nbsp;cleanup()</pre>
<div class="block">Un-initialze this sender object. This is called once, before the
 thread is stopped.</div>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">The thread code here overrides the standard Sender run() behavior.
 At start, before we enter the main loop we create the Virtual Connection
 as required by the hybrid polling. Since we do not really multiplex the
 physical connection we always create just one Virtual Connection.
 In the main loop</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="send(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>protected&nbsp;void&nbsp;send(byte[]&nbsp;msg)
             throws java.io.IOException</pre>
<div class="block">Sends a protocol message to the server on VC #1
 We fall here via the flush() method of the base class</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - Message to send.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If we couldn't send the message.</dd></dl>
</li>
</ul>
<a name="sendOnce(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendOnce</h4>
<pre>protected&nbsp;void&nbsp;sendOnce(byte[]&nbsp;msg,
            int&nbsp;beepType)
                 throws java.io.IOException</pre>
<div class="block">Try to send a protocol message to the server, and handle the response.
 This method does not handle retries.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - Message to send.</dd><dd><code>beepType</code> - the type of beep info wrapping this message</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If we couldn't send the message and get back
 a response.</dd></dl>
</li>
</ul>
<a name="readFully(java.io.InputStream, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFully</h4>
<pre>protected&nbsp;void&nbsp;readFully(java.io.InputStream&nbsp;stream,
             byte[]&nbsp;buffer)
                  throws java.io.IOException</pre>
<div class="block">Our own implementation of ReadFully().
 We cannot use DataInputStream.readFully(), because on MSIE,
 it does not throw an exception when the connection is closed.
 I think it's because Under MSIE, written on top of WinInet,
 read will return 0 instead of -1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stream</code> - The stream to read from.</dd><dd><code>buffer</code> - The buffer to read to.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if something went wrong.</dd></dl>
</li>
</ul>
<a name="createURLConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createURLConnection</h4>
<pre>protected&nbsp;java.net.URLConnection&nbsp;createURLConnection()
                                              throws java.io.IOException</pre>
<div class="block">Create the URLConnection object.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A URLConnection object for the connection URL.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if we couldn't create the URLConnection object.</dd></dl>
</li>
</ul>
<a name="readBytes(java.io.DataInputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBytes</h4>
<pre>public&nbsp;byte[]&nbsp;readBytes(java.io.DataInputStream&nbsp;stream)
                 throws java.io.IOException</pre>
<div class="block">Read a byte array, prefixed by it's length, from the given input stream.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stream</code> - The stream to read from.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a byte array.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if read failed.</dd></dl>
</li>
</ul>
<a name="safeGetInputStream(java.net.URLConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>safeGetInputStream</h4>
<pre>protected static&nbsp;java.io.InputStream&nbsp;safeGetInputStream(java.net.URLConnection&nbsp;urlConnection)
                                                 throws java.io.IOException</pre>
<div class="block">Return the input stream from the given URL connection. When Java2
 signing will be supported, relevant permission handling code should
 go into the "catch" section when contacting other servers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>urlConnection</code> - The connection to get the stream from.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if something went wrong in gettion the stream.</dd></dl>
</li>
</ul>
<a name="createCiphers(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createCiphers</h4>
<pre>public&nbsp;void&nbsp;createCiphers(byte[]&nbsp;key,
                 int&nbsp;requiredKeyLength)</pre>
<div class="block">Create the RC2 ciphers for signing and encryption of the message.
 on exit, m_signCipher, m_encryptCipher, and m_decryptCipher will be
 set to new ciphers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key to use.</dd><dd><code>requiredKeyLength</code> - The number of bytes to use from the key.
 This is used so that a long array could be used to pass a shorter key.
 The LSB bytes of the key are used.</dd></dl>
</li>
</ul>
<a name="buildCompoundMessage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildCompoundMessage</h4>
<pre>public&nbsp;byte[]&nbsp;buildCompoundMessage()
                            throws java.io.IOException</pre>
<div class="block">Builds a compound message from the existing messages in queue.
 The compound message conatains a set of complete sub-messages as added
 to the queue. Takes all available messages in queue and sends them
 in one block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="startSender()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startSender</h4>
<pre>public&nbsp;void&nbsp;startSender()
                 throws java.io.IOException</pre>
<div class="block">Start the sending thread.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If something went wrong in initialization.</dd></dl>
</li>
</ul>
<a name="flush()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;boolean&nbsp;flush()</pre>
<div class="block">Dispatch all messages waiting on the queue. This message does does not
 lock the queue, so a message could come in exactly after we finished
 flushing. If you want to make sure the queue is empty, you should do
 the synchronization on the caller's side.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if flushing succeeded, false if an error occured when
          sending one of the messages (And the rest of the queue is
          not flushed).</dd></dl>
</li>
</ul>
<a name="queueMessage(byte[], byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queueMessage</h4>
<pre>public&nbsp;void&nbsp;queueMessage(byte[]&nbsp;msg,
                byte&nbsp;priority)</pre>
<div class="block">Submit a new outgoing message.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The message to send.</dd><dd><code>priority</code> - The message priority.</dd></dl>
</li>
</ul>
<a name="sendKeepAlive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendKeepAlive</h4>
<pre>protected&nbsp;boolean&nbsp;sendKeepAlive()</pre>
<div class="block">Send a keepalive message NOW.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if sending succeeded, false if an error occured.</dd></dl>
</li>
</ul>
<a name="isStopped()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStopped</h4>
<pre>public&nbsp;boolean&nbsp;isStopped()</pre>
<div class="block">Test if the receiver was stopped.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the receiver was stopped.</dd></dl>
</li>
</ul>
<a name="getKeepAliveRate()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getKeepAliveRate</h4>
<pre>public&nbsp;long&nbsp;getKeepAliveRate()</pre>
<div class="block">Get the keepalive time.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The keepalive rate, in ms.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a>
<div class="skip"><a href="#skip-navbar_bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/lotus/sametime/core/util/connection/HybridPollingConnection.html" title="class in com.lotus.sametime.core.util.connection"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../com/lotus/sametime/core/util/connection/JSSEManager.html" title="class in com.lotus.sametime.core.util.connection"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/lotus/sametime/core/util/connection/HybridPollingSender.html" target="_top">Frames</a></li>
<li><a href="HybridPollingSender.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
